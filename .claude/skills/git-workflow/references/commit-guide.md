# 커밋 절차

## 커밋 메시지 형식

```
<Type>: <Subject> #<이슈번호>
```

### Type 종류

| Type     | 설명                              |
| -------- | --------------------------------- |
| feat     | 새로운 기능 추가                  |
| fix      | 버그 수정                         |
| style    | 스타일 수정 (코드 로직 변경 없음) |
| refactor | 코드 리팩토링                     |
| docs     | 문서 수정                         |
| chore    | 기타 작업 (빌드, 설정 등)         |

---

## ⚠️ 필수 규칙

### 사용자 확인 필수

**절대 금지**: 사용자 확인 없이 임의로 커밋하는 행위

1. 커밋 타입과 메시지는 반드시 AskUserQuestion으로 확인
2. 사용자가 승인한 경우에만 커밋 실행
3. staged 변경사항 유무에 따라 처리 방식이 다름

---

## 실행 순서

### Step 1: 현재 상태 확인 (병렬 실행)

```bash
git status
git diff --staged
git diff
git branch --show-current
```

- 브랜치 이름 형식: `feat/123`, `fix/456` 등
- 숫자 부분을 이슈 번호로 사용
- 이슈 번호 추출 실패 시 커밋 진행하지 않고 사용자에게 확인

### Step 2: 변경 사항 분석

**staged 변경사항이 있는 경우:**

```bash
git diff --staged
```

- staged된 파일들의 변경 내용만 분석
- staged 내용만 기반으로 커밋 메시지 작성
- **unstaged 변경사항은 커밋 메시지에 절대 포함하지 않음**

**staged 변경사항이 없는 경우:**

```bash
git diff
git status
```

- 모든 변경 파일(untracked + modified)의 내용을 분석
- 전체 변경사항을 요약하여 커밋 메시지 작성
- 커밋 전 `git add -A`로 전체 스테이징

### Step 3: 커밋 타입 및 메시지 제안

AskUserQuestion 도구로 사용자에게 확인:

1. **커밋 타입 선택** (분석 결과 기반 추천, 추천 타입을 첫 번째 옵션으로)
2. **커밋 메시지 확인/수정** (제안 메시지 표시)

**상세 내용 요약 규칙:**

- 변경 사항을 **최대 4줄의 bullet list**로 요약
- 각 항목은 핵심 변경 내용만 간결하게 기술
- 4줄 초과 시 중요도 순으로 압축

### Step 4: 커밋 실행

```bash
# staged 변경사항이 없었던 경우에만 전체 추가
git add -A

# 커밋 생성
git commit -m "<Type>: <Subject> #<이슈번호>"
```

**주의**: staged 변경사항이 있었던 경우 `git add`를 실행하지 않고 바로 커밋

---

## 커밋 메시지 규칙 (필수 준수)

1. **Subject는 명령형으로 작성** (예: "추가", "수정", "개선", "제거")
2. **Subject 끝에 마침표 없음**
3. **Subject는 50자 이내로 간결하게**
4. **이슈 번호는 브랜치에서 자동 추출** (수동 입력 금지)
5. **한글 커밋 메시지 사용**
6. **특수문자/줄바꿈 금지**
7. **변경 내용을 정확히 반영** (과장하거나 축소하지 않음)
8. **Co-Authored-By, Generated by Claude Code 등 AI 관련 문구 절대 금지**

---

## 예시

```
feat: 다크모드 토글 버튼 추가 #112
fix: 사이드바 스크롤 오류 해결 #108
style: 헤더 레이아웃 간격 조정 #115
refactor: API 호출 로직 분리 #120
docs: README 설치 가이드 업데이트 #99
chore: ESLint 설정 업데이트 #101
```

---

## summary.json 작성

커밋 완료 후 `.claude/summary.json` 작성:

```json
{
  "request": "커밋 요청",
  "response": "feat: Discord footer 기능 추가 #114",
  "started_at": "..."
}
```

**규칙:** 특수문자/줄바꿈 금지, 커밋 메시지 그대로 기재
