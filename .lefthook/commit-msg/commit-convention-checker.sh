#!/bin/bash

# Read the commit message from the file
COMMIT_MSG=$(head -n1 "$1")

# Define the regex pattern for validation
PATTERN='^(install|docs|add|feat|fix|draft|style|refactor|chore|rename|remove):.*#.*$'
MERGE_PATTERN='^(Merge|Merge branch|Merge pull request).*$'

# Check if the commit message matches the pattern
if ! [[ $COMMIT_MSG =~ $PATTERN ]] && ! [[ $COMMIT_MSG =~ $MERGE_PATTERN ]]; then
    cat << 'EOF'
ðŸ‘Ž ìž˜ëª»ëœ ì»¤ë°‹ ë©”ì„¸ì§€ìž…ë‹ˆë‹¤!

ì•„ëž˜ ì˜ˆì œë¥¼ ì°¸ê³ í•´ì£¼ì„¸ìš”
------------------------------------------------------
"(prefix): ì»¤ë°‹ ë‚´ìš© #issue-number"

"feat: êµ¬ê¸€ ë¡œê·¸ì¸ ê¸°ëŠ¥ ì¶”ê°€ #123"
------------------------------------------------------

ì‚¬ìš©ê°€ëŠ¥í•œ commitì˜ prefixëŠ” ì•„ëž˜ì™€ ê°™ìŠµë‹ˆë‹¤.

=============== ë°˜ë“œì‹œ ì½œë¡ ì„ í•œ ê°œ(:) ì‚¬ìš©í•˜ê³  ë„ì–´ì“°ê¸° í›„ ë‚´ìš©ì„ ìž…ë ¥í•©ë‹ˆë‹¤. ===============

install:          íŒ¨í‚¤ì§€ ì„¤ì¹˜
docs:             ë¬¸ì„œ ìˆ˜ì •
add:              ë‹¨ìˆœ íŒŒì¼ ì¶”ê°€
feat:             ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€
fix:              ë²„ê·¸ ìˆ˜ì •
draft:            ìž‘ì—… ì¤‘ì¸ ì»¤ë°‹
style:            CSS ë° UI, ì½”ë“œ í¬ë§· ë³€ê²½, ì„¸ë¯¸ ì½œë¡  ëˆ„ë½, ì½”ë“œ ìˆ˜ì •ì´ ì—†ëŠ” ê²½ìš°
refactor:         ì½”ë“œ ë¦¬íŒ©í† ë§ (ê¸°ëŠ¥ ë³€ê²½ X, ì½”ë“œ ê°€ë…ì„±, êµ¬ì¡°, í’ˆì§ˆ ê°œì„ ì˜ ê²½ìš°)
chore:            ë¹Œë“œ ì—…ë¬´ ìˆ˜ì •, íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ìˆ˜ì •
rename:           íŒŒì¼ í˜¹ì€ í´ë”ëª…ì„ ìˆ˜ì •í•˜ê±°ë‚˜ ì˜®ê¸°ëŠ” ìž‘ì—…ë§Œì¸ ê²½ìš°
remove:           íŒŒì¼ì„ ì‚­ì œí•˜ëŠ” ìž‘ì—…ë§Œ ìˆ˜í–‰í•œ ê²½ìš°

==================================================================================
EOF
    exit 1
else
    echo "ðŸ‘ ì»¤ë°‹ ë©”ì„¸ì§€ê°€ ì˜¬ë°”ë¥´ê²Œ ìž‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤!"
    exit 0
fi
